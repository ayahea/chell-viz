!function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)i=s[u],o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(p&&p(t);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={1:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=c;a.push(["./index.tsx",0]),n()}({"./index.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-dom/index.js"),a=n("./src/ChellVizApp.tsx");o.render(r.createElement(a.ChellVizApp,null),document.getElementById("root"))},"./src/ChellVizApp.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),i=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=n("./types/chell.ts"),c=n("./src/container/VizPanelContainer.tsx"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return a.createElement("div",{id:"ChellVizApp"},a.createElement(i.Grid,{centered:!0,divided:"vertically"},a.createElement(i.GridRow,null,a.createElement(c.VizPanelContainer,{dataDirs:["1","_100k","_1m"].map(function(e){return"assets/contact_map/example"+e}),supportedVisualizations:[s.VIZ_TYPE.CONTACT_MAP,s.VIZ_TYPE.CONTACT_MAP_DYGRAPH,s.VIZ_TYPE.CONTACT_MAP_HIGH_CHART,s.VIZ_TYPE.CONTACT_MAP_PLOTLY,s.VIZ_TYPE.CONTACT_MAP_RECHART],initialVisualizations:[s.VIZ_TYPE.CONTACT_MAP_RECHART],numPanels:1})),a.createElement(i.GridRow,null,a.createElement(c.VizPanelContainer,{dataDirs:["1","2","3"].map(function(e){return"assets/contact_map/example"+e}),supportedVisualizations:[s.VIZ_TYPE.CONTACT_MAP,s.VIZ_TYPE.NGL],initialVisualizations:[s.VIZ_TYPE.CONTACT_MAP,s.VIZ_TYPE.NGL],numPanels:2})),a.createElement(i.GridRow,null,a.createElement(c.VizPanelContainer,{dataDirs:["centroids","centroids_subset","ngl","spring2/full"].map(function(e){return"assets/"+e}),initialVisualizations:[s.VIZ_TYPE["T-SNE"],s.VIZ_TYPE.SPRING],supportedVisualizations:[s.VIZ_TYPE["T-SNE"],s.VIZ_TYPE.SPRING],numPanels:2}))))},t}(a.Component);t.ChellVizApp=l},"./src/component/ChellSlider.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/rc-slider/es/index.js"),i=n("./node_modules/react/index.js");n("./node_modules/rc-slider/assets/index.css");var s=function(e){function t(t){var n=e.call(this,t)||this;return n.onAfterChange=function(e){return function(t){e&&e(t),n.setState({value:t})}},n.onChange=function(e){return function(t){e&&e(t),n.setState({value:t})}},n.state={value:t.defaultValue},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.defaultValue,n=e.max,r=e.min,o=e.label,s=e.onAfterChange,c=e.onChange;return i.createElement("div",null,i.createElement("p",null,o+": "+this.state.value),i.createElement(a.default,{defaultValue:t,max:n,min:r,onAfterChange:this.onAfterChange(s),onChange:this.onChange(c)}))},t}(i.Component);t.ChellSlider=s},"./src/component/ContactMapComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),s=n("./node_modules/react-plotlyjs-ts/dist/index.js"),c=n("./node_modules/dygraphs/index.js"),l=n("./node_modules/react-highcharts/dist/ReactHighcharts.js"),p=n("./node_modules/recharts/es6/index.js"),u=n("./src/helper/ReactHelper.ts"),d=n("./src/component/ChellSlider.tsx"),h={blackDots:new Array,domain:[1,100],max_x:1,min_x:1e3,nodeSize:4,probabilityFilter:.99};t.ContactMapComponent=u.withDefaultProps({chartLib:"rechart",contactColor:"#009999",couplingColor:"#000000",data:{contactMonomer:[],couplingScore:[],distanceMapMonomer:[]},onClick:void 0,onMouseEnter:void 0,selectedData:void 0},function(e){function t(t){var n=e.call(this,t)||this;return n.state=h,n.dygraphElement=null,n.onClick=function(){return function(e){n.props.onClick&&n.props.onClick(e)}},n.onProbabilityChange=function(){return function(e){n.setState({probabilityFilter:e/100})}},n.onNodeSizeChange=function(){return function(e){n.setState({nodeSize:e})}},n.onMouseEnter=function(){return function(e){var t=e.payload,r=n.props.onMouseEnter;r&&r(t)}},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props.data;e&&this.setupData(e)},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.chartLib,o=n.data;(o!==e.data||this.state.probabilityFilter!==t.probabilityFilter)&&this.setupData(o),"dygraph"===r&&this.dygraphElement&&o.contactMonomer.length>=1&&(this.dygraph=new c.default(this.dygraphElement,o.contactMonomer.map(function(e){return[e.i,e.j]}),{drawAxesAtZero:!0,drawGrid:!0,drawPoints:!0,pointSize:this.state.nodeSize,strokeWidth:0}))},t.prototype.render=function(){var e=this.props,t=e.chartLib;if(!e.data)return null;switch(t){case"dygraph":return this.renderDygraph();case"highchart":return this.renderHighChart();case"plotly":return this.renderPlotly();case"rechart":return this.renderRechart();default:throw new Error("Unsupported Chart rendering library '"+t)}},t.prototype.renderPlotly=function(){var e=this.props,t=e.contactColor,n=e.couplingColor,r=e.data,o=this.state.blackDots,a=new Float32Array(2*r.contactMonomer.length);return r.contactMonomer.forEach(function(e,t){a[2*t]=e.i,a[2*t+1]=e.j}),i.createElement("div",{style:{padding:10}},i.createElement(s.default,{config:{displayModeBar:!0},data:[{marker:{color:t,sizemax:2*this.state.nodeSize,sizemin:this.state.nodeSize},mode:"markers",type:"pointcloud",xy:a},{marker:{color:n,sizemax:2*this.state.nodeSize,sizemin:this.state.nodeSize},mode:"markers",type:"pointcloud",x:o.map(function(e){return e.i}),y:o.map(function(e){return e.j})}],layout:{height:440,legend:{},showlegend:!1,width:440,yaxis:{autorange:"reversed"}}}),this.renderSliders())},t.prototype.renderRechart=function(){var e=this.props,t=e.contactColor,n=e.couplingColor,r=e.data,o=e.selectedData,a=this.state,s=a.blackDots,c=a.domain;return i.createElement("div",{style:{padding:10}},i.createElement(p.ScatterChart,{width:370,height:370},i.createElement(p.XAxis,{type:"number",dataKey:"i",orientation:"top",domain:c}),i.createElement(p.YAxis,{type:"number",dataKey:"j",reversed:!0,domain:c}),"number"==typeof o&&i.createElement(p.ReferenceLine,{x:o,stroke:"#ff0000"}),"number"==typeof o&&i.createElement(p.ReferenceLine,{y:o,stroke:"#ff0000"}),i.createElement(p.Scatter,{name:"contacts_monomer",data:r.contactMonomer,fill:t,onClick:this.onClick(),shape:i.createElement(p.Dot,{r:this.state.nodeSize})}),i.createElement(p.Scatter,{name:"CouplingScoresCompared",data:s,fill:n,onClick:this.onClick(),onMouseEnter:this.onMouseEnter(),shape:i.createElement(p.Dot,{r:this.state.nodeSize})}),i.createElement(p.Tooltip,null)),this.renderSliders())},t.prototype.renderHighChart=function(){var e=this.props,t=e.contactColor,n=e.couplingColor,r=e.data,o=this.state.blackDots,a={legend:{enabled:!1},series:[{color:t,data:r.contactMonomer.map(function(e){return[e.i,e.j]}),type:"scatter"},{color:n,data:o.map(function(e){return[e.i,e.j]}),type:"scatter"}],title:"",yAxis:{reversed:!0}};return i.createElement("div",{style:{padding:10}},i.createElement(l,{config:a}),this.renderSliders())},t.prototype.renderDygraph=function(){var e=this;return i.createElement("div",{style:{padding:10}},i.createElement("div",{ref:function(t){return e.dygraphElement=t},style:{height:370,width:370}}),this.renderSliders())},t.prototype.renderSliders=function(){return i.createElement("div",null,i.createElement(d.ChellSlider,{max:100,min:0,label:"Probability",defaultValue:99,onChange:this.onProbabilityChange()}),i.createElement(d.ChellSlider,{max:5,min:1,label:"Node Size",defaultValue:this.state.nodeSize,onChange:this.onNodeSizeChange()}))},t.prototype.setupData=function(e){var t=this,n=h.max_x,r=new Array;e.contactMonomer.forEach(function(e){n=Math.max(n,e.i)}),e.couplingScore.filter(function(e){return e.probability>=t.state.probabilityFilter}).forEach(function(e){n=Math.max(n,e.i),r.push(e),r.push(a({},e,{i:e.j,A_i:e.A_j,j:e.i,A_j:e.A_i}))}),this.setState({blackDots:r,domain:[1,n]})},t}(i.Component))},"./src/component/NGLComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/ngl/dist/ngl.esm.js"),i=n("./node_modules/react/index.js"),s=n("./node_modules/semantic-ui-react/dist/es/index.js");t.SUPPORTED_REPS=["axes","backbone","ball+stick","distance","label","line","hyperball","spacefill"];var c={max_x:0,min_x:1e3,nodeSize:4,probabilityFilter:.99,residueOffset:0,residueSelectionType:"distance",selection:"",stage:void 0,structureComponent:void 0},l=function(e){function n(n){var r=e.call(this,n)||this;return r.state=c,r.canvas=null,r.dropdownItems=t.SUPPORTED_REPS.map(function(e){return{key:e,text:"Using "+e+" representations for residues",value:e}}),r.onResidueSelectionTypeChange=function(){return function(e,t){r.setState({residueSelectionType:t.value})}},r}return o(n,e),n.prototype.componentDidMount=function(){if(this.canvas){var e=new a.Stage(this.canvas);this.setState({stage:e});var t=this.props.data;t&&this.setupStage(t,e)}},n.prototype.componentWillUnmount=function(){var e=this.state.stage;e&&(e.dispose(),this.setState({stage:void 0}))},n.prototype.componentDidUpdate=function(e,t){var n=this,r=this.props,o=r.data,a=r.selectedData,i=this.state,s=i.residueSelectionType,c=i.stage,l=i.structureComponent,p=o&&o!==e.data;if(c&&p&&c.removeAllComponents(),c&&p&&o)this.setupStage(o,c);else if(a&&a!==e.selectedData&&this.state.structureComponent){if(a.i&&a.j){var u=[a.i,a.j].map(function(e){return(e-n.state.residueOffset).toString()});this.highlightElement(this.state.structureComponent,u.join(".CA, ")+".CA",this.state.residueSelectionType)}}else s!==t.residueSelectionType&&this.representationElement&&l&&(l.removeRepresentation(this.representationElement),this.representationElement=l.addRepresentation(s,{sele:this.representationElement.parameters.sele}))},n.prototype.render=function(){var e=this;return i.createElement("div",{id:"NGLComponent",style:{padding:15}},i.createElement("div",{ref:function(t){return e.canvas=t},style:{height:370,width:370}}),i.createElement("br",null),i.createElement(s.Dropdown,{fluid:!0,defaultValue:c.residueSelectionType,options:this.dropdownItems,onChange:this.onResidueSelectionTypeChange()}),i.createElement("br",null),"Selected residues: "+this.state.selection)},n.prototype.setupStage=function(e,t){var n=t.addComponentFromObject(e);this.setState({residueOffset:e.residueStore.resno[0],structureComponent:n}),t.defaultFileRepresentation(n),n.reprList.forEach(function(e){e.setParameters({opacity:1})})},n.prototype.onHover=function(e,t,n,r){if(t&&(t.atom||t.bond)){var o=t.atom||t.closestBondAtom;this.props.onHoverPickCallback&&this.props.onHoverPickCallback(o.resno+this.state.residueOffset)}},n.prototype.highlightElement=function(e,t,n){void 0===n&&(n="spacefill"),this.representationElement&&e.removeRepresentation(this.representationElement),this.representationElement=e.addRepresentation(n,{atomPair:[t.split(",")],color:"skyblue",labelUnit:"nm"}),this.setState({selection:t})},n}(i.Component);t.NGLComponent=l},"./src/component/SpringComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/d3/index.js"),s=n("./node_modules/pixi.js/lib/index.js"),c=n("./node_modules/react/index.js"),l=n("./src/helper/ReactHelper.ts");t.SpringComponent=l.withDefaultProps({canvasBackgroundColor:13421772,data:{links:[],nodes:[]},height:450,selectedCategory:"",width:450},function(e){function t(t){var n=e.call(this,t)||this;return n.pixiApp=new s.Application,n.nodeSprites=new s.Container,n.edgeSprites=new s.Container,n.state=a({},n.state,{canvasHeight:Math.floor(.9*n.props.height),canvasWidth:Math.floor(.9*n.props.width)}),n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=e.canvasHeight,n=e.canvasWidth;this.pixiApp=new s.Application(t,n,{backgroundColor:this.props.canvasBackgroundColor,view:this.canvasElement});var r=this.pixiApp,o=this.props,a=o.data,i=o.selectedCategory;a&&(r.stage.removeChildren(),this.nodeSprites=new s.Container,this.edgeSprites=new s.Container,this.generateNodeSprites(a.nodes,this.nodeSprites,i),this.generateLinesSprite(a.links,this.edgeSprites,i),this.centerCanvas(a),r.stage.addChild(this.edgeSprites),r.stage.addChild(this.nodeSprites))},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.data,o=n.selectedCategory;if(r&&r!==e.data){var a=this.pixiApp;a.stage.removeChildren(),this.nodeSprites=new s.Container,this.edgeSprites=new s.Container,this.generateNodeSprites(r.nodes,this.nodeSprites,o),this.generateLinesSprite(r.links,this.edgeSprites,o),this.centerCanvas(r),a.stage.addChild(this.edgeSprites),a.stage.addChild(this.nodeSprites)}else o!==e.selectedCategory&&(this.updateNodeSprites(r.nodes,this.nodeSprites,o),this.edgeSprites.removeChildren(),this.generateLinesSprite(r.links,this.edgeSprites,o),this.centerCanvas(r))},t.prototype.render=function(){var e=this,t={width:this.state.canvasWidth,height:this.state.canvasHeight};return c.createElement("div",{id:"SpringComponent",style:{height:this.props.height,padding:15,width:this.props.width}},c.createElement("div",{id:"PixiCanvasHolder"},c.createElement("canvas",{ref:function(t){return e.canvasElement=t||void 0},style:t})))},t.prototype.generateLinesSprite=function(e,t,n){void 0===e&&(e=[]);for(var r=new s.Graphics,o=this.state,a=o.canvasHeight,i=o.canvasWidth,c=0,l=e;c<l.length;c++){var p=l[c],u=p.source,d=p.target;n&&u.category!==n&&d.category!==n||(r.lineStyle(5,16711680,1),r.moveTo(u.x,u.y),r.lineTo(d.x,d.y))}var h=r.getBounds(),f=new s.Rectangle(h.x,h.y,Math.max(i,h.width),Math.max(a,h.height)),m=this.pixiApp.renderer.generateTexture(r,s.SCALE_MODES.LINEAR,i/a,f),_=new s.Sprite(m);_.x=f.x,_.y=f.y,t.addChild(_)},t.prototype.generateNodeSprites=function(e,t,n){void 0===e&&(e=[]);for(var r=0,o=e;r<o.length;r++){var a=o[r],i=new s.Graphics;i.beginFill(a.colorHex),i.drawCircle(0,0,16),i.endFill();var c=new s.Sprite(this.pixiApp.renderer.generateTexture(i));c.x=a.x,c.y=a.y,n&&a.category!==n&&(c.alpha=.1),c.anchor.set(.5,.5),c.interactive=!0,c.scale.set(.5),t.addChild(c)}},t.prototype.updateNodeSprites=function(e,t,n){void 0===e&&(e=[]);for(var r=0;r<t.children.length;++r){var o=e[r],a=t.children[r];n&&o.category!==n?a.alpha=.1:a.alpha=1}},t.prototype.centerCanvas=function(e){var t=this.edgeSprites,n=this.nodeSprites,r=this.state,o=r.canvasHeight,a=r.canvasWidth,s=e.nodes.map(function(e){return e.x}),c=e.nodes.map(function(e){return e.y}),l=i.max(s),p=i.max(c),u=i.min(s),d=i.min(c),h=l-u+50,f=p-d+50,m=.85/Math.max(h/a,f/o),_=m-this.nodeSprites.scale.x,y=a/2-(l+u)/2*m-n.position.x,v=o/2+30-(p+d)/2*m-n.position.y;n.position.x+=y,n.position.y+=v,n.scale.x+=_,n.scale.y+=_,t.position=n.position,t.scale=n.scale},t}(c.Component))},"./src/component/TComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),s=n("./node_modules/recharts/es6/index.js"),c=n("./src/helper/ReactHelper.ts");t.TComponent=c.withDefaultProps({data:[[0],[0]],height:450,width:450},function(e){function t(t){var n=e.call(this,t)||this;return n.state=a({},n.state,{chartHeight:Math.floor(.9*n.props.height),chartWidth:Math.floor(.9*n.props.width)}),n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.height,r=e.width;return i.createElement("div",{id:"TComponent",style:{height:n,padding:15,width:r}},i.createElement(s.ScatterChart,{height:this.state.chartHeight,width:this.state.chartHeight},i.createElement(s.XAxis,{type:"number",dataKey:"x"}),i.createElement(s.YAxis,{type:"number",dataKey:"y"}),i.createElement(s.CartesianGrid,null),i.createElement(s.Scatter,{data:t?t.map(function(e){return{x:e[0],y:e[1]}}):[]})))},t}(i.Component))},"./src/component/VizSelectorPanel.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),i=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=n("./types/chell.ts"),c=n("./src/component/NGLComponent.tsx"),l=n("./src/component/SpringComponent.tsx"),p=n("./src/component/TComponent.tsx"),u=n("./src/helper/ReactHelper.ts"),d=n("./src/component/ContactMapComponent.tsx"),h={data:{},height:450,initialViz:s.VIZ_TYPE["T-SNE"],onDataSelect:function(e){},selectedData:void 0,supportedVisualizations:[],width:450},f={selectedViz:h.initialViz};t.VizSelectorPanel=u.withDefaultProps(h,function(e){function t(t){var n=e.call(this,t)||this;return n.state=f,n.onVizSelect=function(e,t){n.setState({selectedViz:t.value})},n.generateDropdownItems=function(e){return e.map(function(e){return{key:e,text:e,value:e}}).sort(function(e,t){return e.key.localeCompare(t.key)})},n.state={selectedViz:t.initialViz?t.initialViz:s.VIZ_TYPE.SPRING},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.selectedData,r=e.supportedVisualizations,o=e.width;return a.createElement("div",{className:"VizSelectorPanel",style:{width:o}},a.createElement(i.Dropdown,{options:this.generateDropdownItems(r),fluid:!0,onChange:this.onVizSelect,defaultValue:this.props.initialViz}),a.createElement(i.Card,{fluid:!0,raised:!0},this.renderVizContainer(this.state.selectedViz,t,n)))},t.prototype.renderVizContainer=function(e,t,n){var r=this.props,o=r.height,i=r.width;switch(e){case s.VIZ_TYPE["T-SNE"]:return a.createElement(p.TComponent,{data:t["T-SNE"],height:o,width:i});case s.VIZ_TYPE.SPRING:return a.createElement(l.SpringComponent,{data:t.Spring,height:o,width:i});case s.VIZ_TYPE.NGL:return a.createElement(c.NGLComponent,{data:t.NGL,selectedData:n,onHoverPickCallback:this.props.onDataSelect});case s.VIZ_TYPE.CONTACT_MAP:return a.createElement(d.ContactMapComponent,{data:t["Contact Map"],onMouseEnter:this.props.onDataSelect,selectedData:n});case s.VIZ_TYPE.CONTACT_MAP_DYGRAPH:return a.createElement(d.ContactMapComponent,{chartLib:"dygraph",data:t["Contact Map"],onMouseEnter:this.props.onDataSelect,selectedData:n});case s.VIZ_TYPE.CONTACT_MAP_HIGH_CHART:return a.createElement(d.ContactMapComponent,{chartLib:"highchart",data:t["Contact Map"],onMouseEnter:this.props.onDataSelect,selectedData:n});case s.VIZ_TYPE.CONTACT_MAP_PLOTLY:return a.createElement(d.ContactMapComponent,{chartLib:"plotly",data:t["Contact Map"],onMouseEnter:this.props.onDataSelect,selectedData:n});case s.VIZ_TYPE.CONTACT_MAP_RECHART:return a.createElement(d.ContactMapComponent,{chartLib:"rechart",data:t["Contact Map"],onMouseEnter:this.props.onDataSelect,selectedData:n});default:throw new Error("Unknown viz: "+e)}},t}(a.Component))},"./src/container/VizPanelContainer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/react/index.js"),l=n("./node_modules/semantic-ui-react/dist/es/index.js"),p=n("./src/component/VizSelectorPanel.tsx"),u=n("./src/helper/DataHelper.ts"),d=n("./src/helper/ReactHelper.ts"),h={currentDataDir:"",data:{},selectedData:void 0};t.VizPanelContainer=d.withDefaultProps({initialVisualizations:[],numPanels:1},function(e){function t(t){var n=e.call(this,t)||this;return n.state=h,n.onDataDirChange=function(e,t){n.setState({currentDataDir:t.value})},n.onDataSelect=function(){return function(e){n.setState({selectedData:e})}},n.state=a({},n.state,{currentDataDir:t.dataDirs[0]}),n}return o(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,n,r,o,i;return s(this,function(s){switch(s.label){case 0:e={},t=0,n=this.props.supportedVisualizations,s.label=1;case 1:return t<n.length?(r=n[t],o=e,i=r,[4,u.fetchAppropriateData(r,this.state.currentDataDir)]):[3,4];case 2:o[i]=s.sent(),s.label=3;case 3:return t++,[3,1];case 4:return this.setState({data:a({},e)}),[2]}})})},t.prototype.componentDidUpdate=function(e,t){return i(this,void 0,void 0,function(){var e,n,r,o,i,c;return s(this,function(s){switch(s.label){case 0:if(t.currentDataDir===this.state.currentDataDir)return[3,5];e={},n=0,r=this.props.supportedVisualizations,s.label=1;case 1:return n<r.length?(o=r[n],i=e,c=o,[4,u.fetchAppropriateData(o,this.state.currentDataDir)]):[3,4];case 2:i[c]=s.sent(),s.label=3;case 3:return n++,[3,1];case 4:this.setState({data:a({},e)}),s.label=5;case 5:return[2]}})})},t.prototype.render=function(){return c.createElement(l.Grid,{className:"VizPanelContainer",columns:this.props.numPanels,centered:!0,relaxed:!0},c.createElement(l.GridRow,{columns:1,centered:!0},c.createElement(l.Dropdown,{onChange:this.onDataDirChange,options:this.props.dataDirs.map(function(e){return{key:e,text:e,value:e}}).slice(),placeholder:"Select Data Directory",search:!0})),this.renderPanels(this.props.numPanels,this.state.data,this.props.initialVisualizations).map(function(e,t){return c.createElement(l.GridColumn,{key:t},e)}))},t.prototype.renderPanels=function(e,t,n){for(var r=[],o=0;o<e;++o)r.push(c.createElement(p.VizSelectorPanel,{data:t,initialViz:n[o],onDataSelect:this.onDataSelect(),selectedData:this.state.selectedData,supportedVisualizations:this.props.supportedVisualizations}));return r},t}(c.Component))},"./src/helper/DataHelper.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this;Object.defineProperty(t,"__esModule",{value:!0});var i=n("./types/chell.ts"),s=n("./node_modules/d3/index.js"),c=n("./node_modules/ngl/dist/ngl.esm.js");t.fetchAppropriateData=function(e,t){return r(a,void 0,void 0,function(){return o(this,function(n){switch(e){case i.VIZ_TYPE["T-SNE"]:return[2,d(t)];case i.VIZ_TYPE.SPRING:return[2,l(t)];case i.VIZ_TYPE.NGL:return[2,f(t)];case i.VIZ_TYPE.CONTACT_MAP:case i.VIZ_TYPE.CONTACT_MAP_DYGRAPH:case i.VIZ_TYPE.CONTACT_MAP_HIGH_CHART:case i.VIZ_TYPE.CONTACT_MAP_PLOTLY:case i.VIZ_TYPE.CONTACT_MAP_RECHART:return console.log(t),[2,m(t)];default:return[2,Promise.reject({error:"Currently no appropriate data getter for "+e})]}return[2]})})};var l=function(e){return r(a,void 0,void 0,function(){var t,n,r,a,i,s,c;return o(this,function(o){switch(o.label){case 0:return[4,u(e+"/coordinates.txt")];case 1:return t=o.sent(),[4,h(e+"/graph_data.json")];case 2:return n=o.sent(),[4,p(e+"/categorical_coloring_data.json")];case 3:for(r=o.sent(),a={},i=0;i<n.nodes.length;++i)s=n.nodes[i],a[s.number]=s,s.number in t&&(s.fixed=!0,s.x=t[s.number][0],s.y=t[s.number][1]),c=r.label_list[i],s.category=c,s.colorHex=r.label_colors[c];return n.links.forEach(function(e){var t=a[e.source],n=a[e.target];t&&n&&(e.source=t,e.target=n)}),[2,n]}})})},p=function(e){return r(a,void 0,void 0,function(){var t,n,r,a,i,c,l;return o(this,function(o){switch(o.label){case 0:return[4,s.json(e)];case 1:for(t=o.sent(),n={label_colors:{},label_list:t[Object.keys(t)[0]].label_list},r=t[Object.keys(t)[0]].label_colors,a=0,i=Object.keys(r);a<i.length;a++)c=i[a],"number"==typeof(l=r[c])?n.label_colors[c]=l:"#"===l.charAt(0)?n.label_colors[c]=Number.parseInt("0x"+l.slice(1)):n.label_colors[c]=Number.parseInt(l);return[2,n]}})})};t.fetchColorData=function(e){return r(a,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return[4,s.text(e)];case 1:return t=r.sent(),n={},t.split("\n").forEach(function(e,t,r){if(e.length>0){var o=e.split(","),a=o[0],i=[];o.forEach(function(e,t,n){t>0&&i.push(parseFloat(e))}),n[a]=i}}),[2,n]}})})};var u=function(e){return r(a,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return[4,s.text(e)];case 1:return t=r.sent(),n=[],t.split("\n").forEach(function(e,t,r){var o=e.split(",");if(o.length>=3){var a=parseFloat(o[1].trim()),i=parseFloat(o[2].trim()),s=parseInt(o[0].trim(),10);n[s]=[a,i]}}),[2,n]}})})},d=function(e){return r(a,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return[4,s.text(e+"/tsne_output.csv")];case 1:return t=r.sent(),n=[],t.split("\n").forEach(function(e,t,r){if(e.length>0){var o=e.split(","),a=[parseFloat(o[0]),parseFloat(o[1])];n.push(a)}}),[2,n]}})})},h=function(e){return r(a,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,s.json(e)];case 1:if(!(t=n.sent()).nodes||!t.links)throw new Error("Unable to parse graph_data - does it have node key(s)?");return[2,t]}})})},f=function(e){return r(a,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return t=e+"/protein.pdb",[4,c.autoLoad(t)];case 1:return[2,n.sent()]}})})},m=function(e){return r(a,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=["contacts_monomer.csv","coupling_scores.csv"],[4,Promise.all(t.map(function(t){return s.text(e+"/"+t)}))];case 1:return n=r.sent(),[2,{contactMonomer:_(n[0]),couplingScore:y(n[1])}]}})})},_=function(e){var t=[];return e.split("\n").slice(1).forEach(function(e){var n=e.split(",");3===n.length&&t.push({i:parseFloat(n[0]),j:parseFloat(n[1]),dist:parseFloat(n[2])})}),t},y=function(e){return e.split("\n").slice(1).map(function(e){var t=e.split(",");return{i:parseFloat(t[0]),A_i:t[1],j:parseFloat(t[2]),A_j:t[3],fn:parseFloat(t[4]),cn:parseFloat(t[5]),segment_i:t[6],segment_j:t[7],probability:parseFloat(t[8]),dist_intra:parseFloat(t[9]),dist_multimer:parseFloat(t[10]),dist:parseFloat(t[11]),precision:parseFloat(t[12])}})}},"./src/helper/ReactHelper.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDefaultProps=function(e,t){return t.defaultProps=e,t}},"./types/chell.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CONTACT_MAP="Contact Map",e.CONTACT_MAP_DYGRAPH="Contact Map (Dygraph)",e.CONTACT_MAP_PLOTLY="Contact Map (Plotly)",e.CONTACT_MAP_RECHART="Contact Map (Rechart)",e.CONTACT_MAP_HIGH_CHART="Contact Map (HighChart)",e.NGL="NGL",e.SPRING="Spring",e["T-SNE"]="T-SNE"}(t.VIZ_TYPE||(t.VIZ_TYPE={}))}});